---
title: Cấu hình
slug: phieuinbaocao/cauhinh # <--- This forces the URL back to /cauhinh
description: Cấu hình phiếu in báo cáo trên HIS L2
sidebar:
  order: 2

# Enable TOC just for this page
tableOfContents:
  minHeadingLevel: 2
  maxHeadingLevel: 3
---

## Cấu hình mẫu phiếu in báo cáo

Menu: Quản trị hệ thống → Quản lý báo cáo động → DM Report<br/>
Link: https://bvhatinh.vncare.vn/vnpthis/main/manager.jsp?func=../danhmuc/DMC67_Report

Ấn nút thêm/sửa để thao tác:

- Report name: tên hiển thị của báo cáo.
  :::note
  **Đặt tên rõ ràng:**
  Không nên đặt tên trùng với các phiếu in, báo cáo khác. Dễ gây nhầm lẫn.
  :::
- Report path: lấy tên jasper (`<file name>`.jasper)
- Report Code: đặt theo tên của `<file name>`
  :::caution
  **Đặt tên rõ ràng:**
  Đối với các phiếu in thì đặt theo `<report code>` + postfix<br/>
  `<report code>`: F12 và in phiếu để xem `<report code>`<br/>
  postfix: đặt theo mã bệnh viện hoặc HTH, có thể thêm ký tự để thành unique
  :::
- Table List: khai báo bảng chính truy vấn, đặt lung tung cũng được
- Group ID: chọn nhóm cho báo cáo, đối với các phiếu in thì chọn nhóm "Phiếu in"
- Company ID: phần mềm sẽ mặc định theo mã bệnh viện
- Is Public: mặc định là 4
- DB_BA: chọn là "Báo cáo" đối với các báo cáo lấy dữ liệu nhiều, lâu

## Cấu hình tham số đầu vào

Menu: Quản trị hệ thống → Quản lý báo cáo động → DM Report Field<br/>
Link: https://bvhatinh.vncare.vn/vnpthis/main/manager.jsp?func=../danhmuc/DMC69_Report_Field

:::note
**Phiếu in:**
Với các phiếu in thì tham số đầu vào sẽ mặc định theo chức năng in phiếu. Sử dụng công cụ F12, in phiếu và debug param để xem tham số.
:::

Ấn nút thêm/sửa để thao tác:

- Param name: tên tham số VPA`<kiểu>`\_`<tên tham số>`<br/>
  | Ví dụ | |
  | :------- | :------- |
  | VPARN_khoid | khoid kiểu số |
  | VPARS_tenthuoc | tên thuốc kiểu chuỗi |
  | VPARD_tungay | từ ngày kiểu ngày tháng |
- Table name: bảng truy vấn chính
- Field name: đặt giống `<Param name>`
- Field Type: chọn tương ứng với `<Param name>`
  | Ví dụ | |
  | :------- | :------- |
  | Kiểu số | adNumberic |
  | Kiểu chuỗi | adVarChar |
  | Kiểu ngày tháng | adMonth; adDate; adTimeStamp |
- Description: tên hiển thị trên báo cáo động
- Operation: chọn `=` nếu 1 giá trị, `in` nếu nhiều giá trị
- Lookup: chọn `1` nếu sử dụng sql để lấy dữ liệu, nếu không chọn `0`
- Text value: cấu hình giá trị mặc định
  | Ví dụ | |
  | :------- | :------- |
  | SYSTIME | Ngày giờ hiện tại |
  | STARTDAY | Ngày hiện tại - đầu ngày |
  | ENDDAY | Ngày hiện tại - cuối ngày |
  | STARTMONTH | Ngày đầu tháng - đầu ngày |
  | ENDMONTH | Ngày đầu tháng - cuối ngày |
- Param Sql: Sử dụng câu sql để lấy ra dữ liệu
  :::note
  **Câu SQL:**
  Có thể chọn hoặc tạo mới câu SQL để lấy dữ liệu. Câu sql sẽ lấy 2 column, tương ứng với id và name theo thứ tự. Schema và hid thay thế tương ứng bằng `[SCH]` và `[HID]`<br/>
  **Lấy dữ liệu từ table:**

  ```sql
  SELECT org_id, org_name FROM org_organization
  WHERE org_level = 4 and status = 1 and parent_id = [HID]
  ORDER BY org_name
  ```

  **Lấy dữ liệu tùy ý:**

  ```sql
  SELECT 0, 'Phiếu nhập' FROM dual UNION ALL
  SELECT 1, 'Phiếu xuất' FROM dual
  ```

  :::

- Report Id: điền tên báo cáo và chọn từ combobox
- Param Order: thứ tự hiển thị của `param`
- Label Name: để trống
- Parent Child: mặc định để `,`
  :::note
  **Lấy dữ liệu dựa theo `param` trước:** Ví dụ `param` trước đã chọn khoaid thì `param` này có thể hiển thị phongid của khoa đã chọn trước đó.
  :::
